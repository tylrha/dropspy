<h1 align="center">DROPSPY</h1>

<p align="center">
  <img alt="Version" src="https://img.shields.io/badge/version-1.0.0-blue.svg?cacheSeconds=2592000" />
  <img src="https://img.shields.io/badge/node-16.x-blue.svg" />
  <a href="https://github.com/instigaremidia/dropspy-typescript#readme" target="_blank">
    <img alt="Documentation" src="https://img.shields.io/badge/documentation-yes-brightgreen.svg" />
  </a>
  <a href="https://github.com/instigaremidia/dropspy-typescript/graphs/commit-activity" target="_blank">
    <img alt="Maintenance" src="https://img.shields.io/badge/Maintained%3F-yes-green.svg" />
  </a>
</p>

> Aplica√ß√£o feita para espionar lojas da shopify por meio de inst√¢ncias hospedados no Heroku.

## SUM√ÅRIO
 - <a href="#page_with_curl-descri√ß√£o"> :page_with_curl: Descri√ß√£o</a>
 - <a href="#bulb-funcionalidades"> :bulb: Funcionalidades</a>
 - <a href="#mag_right-atalhos">:mag_right: Rotas do servidor</a>
 - <a href="#camera-ilustra√ß√µes"> :camera: Ilustra√ß√µes</a>
 - <a href="#thought_balloon-resumo-da-opera√ß√£o">:thought_balloon: Resumo da opera√ß√£o</a>
 - <a href="#trumpet-indica√ß√£o-da-opera√ß√£o-atual-do-bot">:trumpet: Configura√ß√µes de opera√ß√£o</a>
 - <a href="#computer-desenvolvimento">:computer: Desenvolvimento</a>
 - <a href="#rocket-tecnologias-utilizadas">:rocket: Tecnologias utilizadas</a>
<br>

## :page_with_curl: DESCRI√á√ÉO

#### Ecossistema dropspy
Esse projeto faz parte de um ecossistema de projetos, que em conjunto permitem a espionagem de lojas, composto por:

<p align="center">

Projeto                                                                                                                 | Fun√ß√£o
----------------------------------------------------------------------------------------------------------------------- | ---------------
<a href="https://github.com/instigaremidia/dropspy" target="_blank"><b style="color:red">dropspy</b></a>                | Inst√¢ncia do bot disponibilizado para `N` aplica√ß√µes na cloud.
<a href="https://github.com/instigaremidia/dropspy-spy-sheets-api" target="_blank">dropspy-spy-sheets-api</a>           | API do google sheets feita para obten√ß√£o e edi√ß√£o de informa√ß√µes.
<a href="https://github.com/instigaremidia/dropspy-add-bots" target="_blank">dropspy-add-bots</a>                       | Aplica√ß√£o feita para cirar inst√¢ncias de bots de forma autom√°tica.
<a href="https://github.com/instigaremidia/dropspy-database-validation" target="_blank">dropspy-database-validation</a> | Aplica√ß√£o feita para valida√ß√£o de 3 vias dos dados no banco de dados.
<a href="https://github.com/instigaremidia/instigaremidia" target="_blank">instigaremidia</a>                           | Aplica√ß√£o onde os dados s√£o mostrados de forma visual.
</p>

#### Clusteriza√ß√£o

A aplica√ß√£o √© permeada por um processo de clusteriza√ß√£o que permite um controle maior sobre a inst√¢ncia por meio do acesso de rotas espec√≠ficas, sendo a aplica√ß√£o dividida em:

<p align="center">

Rota     | Fun√ß√£o
-------- | ---------------
`MASTER` | Cluster principal respons√°vel por criar o servidor do site.
`WORKER` | Cluster secund√°rio respons√°vel por criar e fazer a manuten√ß√£o do bot de espionagem.

</p>

Em tese, uma inst√¢ncia do `DROPSPY` pode criar `N` bots para espionar `Y` lojas, contudo no `servidor da heroku` h√° uma limita√ß√£o de mem√≥ria RAM, em que o indicado √© utilizar somente uma inst√¢ncia mesmo.

#### Estrutura do projeto

O projeto foi estruturado da seguinde forma:

```
./dropspy
|-- src        # Pasta onde fica o c√≥digo
|-- utils      # Fun√ß√µes e bibliotecas reutiliz√°veis de c√≥digo
|-- scripts    # Scripts auxiliares para build do projeto
|-- extensions # Extens√µes que o chrome ir√° carregar
|-- tests      # Testes para garantir que a aplica√ß√£o est√° funcionando corretamente

|-- configs    # Pasta de configura√ß√£o da aplica√ß√£o
|   |-- app-configs.json        # Arquivo de configura√ß√µes da aplica√ß√£o
|-- .env                        # Arquivo de configura√ß√£o de vari√°veis de ambiente
```

De todos os arquivos, incluindo os que n√£o foram mostrados na lista acima, os √∫nicos que tem necessidade de altera√ß√£o do usu√°rio s√£o os 2 √∫ltimos da lista acima, a fim de adequar a aplica√ß√£o para as especificidades de sua opera√ß√£o.

## :bulb: FUNCIONALIDADES

* Espionagem de lojas da shopify que n√£o possuam bloqueador da extens√£o alihunter.
* Permite a manuten√ß√£o do bot a partir do acesso de rotas espec√≠ficas.
* Faz um ping autom√°tico no servidor para evitar o idle-autom√°tico do heroku.
* Release-autom√°tico a cada commit do projeto, a partir do `github-actions`.
* API que mostra informa√ß√µes de espionagem da inst√¢ncia autal.

## :mag_right: ROTAS DA APLICA√á√ÉO

O `DROPSPY` permite o controle de forma interativa a partir do acesso das seguintes rotas:

<p align="center">

Rota       | Fun√ß√£o
---------- | ---------------
`/`        | Tela inicial do servidor da inst√¢ncia do dropspy-bot.
`/api`     | API onde mostra informa√ß√µes de relev√¢ncia sobre a inst√¢ncia do dropspy-bot.
`/restart` | Manda o comando para o bot reiniciar.
`/quit`    | Manda o comando para o bot fechar.

</p>
<br>


## :mag_right: DETALHES DO PROJETO

#### Depend√™ncias do projeto
Para o `DROPSPY` funcionar de maneira adequada, s√£o necess√°rios os seguintes itens:

<p align="center">

Rota       | Fun√ß√£o
---------- | ---------------
`dropspy-spy-sheets-api`    | API do google sheets feita para obten√ß√£o e edi√ß√£o de informa√ß√µes.
`Planilha do google sheets` | Onde ser√£o controlados as `N` inst√¢ncias do `DROPSPY`
`Heroku`                    | Usado para armazenar as `N` inst√¢ncias do `DROPSPY`
`Github`                    | Usado para guardar o c√≥digo e fazer o deploy autom√°tico das `N` inst√¢ncias do `DROPSPY`
`Mongodb`                   | Usado para armazenar informa√ß√µes de espionagem das `N` inst√¢ncias do `DROPSPY`

</p>

#### Ferramentas utilizadas

<p align="center">

Tipo        | Rota                                                                                                                                                         | Fun√ß√£o
----------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------ | ---------------
development | <a href="https://nodejs.org/en/" target="_blank">nodejs</a>                                                                                                  | Engine respons√°vel por executar o c√≥digo.
development | <a href="https://git-scm.com/" target="_blank">git</a>                                                                                                       | Versionamento do c√≥digo.
development | <a href="https://editorconfig.org/" target="_blank">editorconfig</a>                                                                                         | Padroniza√ß√£o do c√≥digo para multi-plataformas.
dev package | <a href="https://www.typescriptlang.org/" target="_blank">typescript</a>                                                                                     | Tipagem avan√ßada para nodejs.
dev package | <a href="https://jestjs.io/pt-BR/" target="_blank">jest</a>                                                                                                  | Testes da aplica√ß√£o.
dev package | <a href="https://github.com/typicode/husky" target="_blank">husky</a>                                                                                        | Automa√ß√£o de tarefas ao realizar commits.
dev package | <a href="https://github.com/conventional-changelog/commitlint" target="_blank">commitlint</a>                                                                | Padroniza√ß√£o das mensagens de commit.
dev package | <a href="https://github.com/commitizen/cz-cli" target="_blank">commitizen</a>                                                                                | Cria√ß√£o de commits no padr√£o de forma auxiliada.
production  | <a href="https://www.docker.com/" target="_blank">docker</a>                                                                                                 | Conteineriza√ß√£o da aplica√ß√£o.
package     | <a href="https://github.com/axios/axios" target="_blank">axios</a>                                                                                           | Consumo de rotas em nodejs.
package     | <a href="https://github.com/medikoo/cli-color" target="_blank">cli-color</a>                                                                                 | Colorir mensagens no terminal.
package     | <a href="https://nodejs.org/api/cluster.html" target="_blank">cluster</a>                                                                                    | Clusteriza√ß√£o da aplica√ß√£o.
package     | <a href="https://github.com/motdotla/dotenv" target="_blank">dotenv</a>                                                                                      | Utiliza√ß√£o de vari√°veis de ambiente (`process.env`).
package     | <a href="https://github.com/mde/ejs" target="_blank">ejs</a>                                                                                                 | Cria√ß√£o de componentes reutiliz√°veis de html.
package     | <a href="https://github.com/expressjs/express" target="_blank">express</a>                                                                                   | Cria√ß√£o de um servidor em nodejs.
package     | <a href="https://github.com/Automattic/mongoose" target="_blank">mongoose</a>                                                                                | Modelagem de objetos do mongodb.
package     | <a href="https://github.com/SunilWang/node-os-utils" target="_blank">node-os-utils</a>                                                                       | Obt√©m informa√ß√µes de CPU e mem√≥ria da m√°quina atual.
package     | <a href="https://github.com/berstend/puppeteer-extra" target="_blank">puppeteer-extra</a>                                                                    | Browser que permite automa√ß√µes, baseado no `puppeteer`.
package     | <a href="https://github.com/berstend/puppeteer-extra/tree/master/packages/puppeteer-extra-plugin-stealth" target="_blank">puppeteer-extra-plugin-stealth</a> | Mascarar utiliza√ß√£o de chromium, fazendo sites n√£o descobrirem que √© uma automa√ß√£o.

</p>

<br>


## :mag_right: AUTORIA

üë§ **Lucas Vieira**

* Website: instigaremidia.com
* Github: [@instigaremidia](https://github.com/instigaremidia)


## :mag_right: CHANGE-LOG

- 0.2.0
  - CHANGE: Remove function
  - ADD: Add init()
- 0.1.1
  - FIX: Crash when calling baz()
- 0.1.0
  - CHANGE: Rename foo() to bar()
- 0.0.1
  - Init the project
